#pragma config(Sensor, S1,     lightSensor,    sensorLightActive)
#pragma config(Sensor, S2,     sonarSensor,    sensorSONAR)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/* 
-----------------------------------
Team Computing Project CA
Luke Griffin and Connor Heaphy
Started: 04/03/2015
Finished:
-----------------------------------
*/


//prototypes
void move_foward(int line_count);
void sense_object(void);


task main()
{
	int line_count = 0;
	
	sense_object();

	
}//End main()


/*moves the robot foward, counts the line 
and if its a black cell stops moves back 
and goes aroun the cell
*/
void move_foward (int line_count)
{
	while (SensorValue(lightSensor) > 35)
	{
		
		motor[motorB] = 50;
		motor[motorC] = 50;
		
		if (SensorValue(lightSensor) < 35)
		{
			wait1Msec(100);
			
			line_count = line_count + 1;
			
			if (SensorValue(lightSensor) < 35)//stop at black cell
			{
				motor[motorB] = 0;
				motor[motorC] = 0;
				
				line_count = line_count - 1;	
				
			}//End if()
			
		}//End if()
		
	}//End while()
	
}//End function move_foward

void sense_object ()
{
	
	
	nMotorEncoder[motorB] = 0;
	nMotorEncoder[motorC] = 0;
	
	while(nMotorEncoder[motorC] < 360)//turn right
	{
		motor[motorC] = 50;
		motor[motorB] = 0;
	}//End while()
	
	motor[motorC]	=	0;
	
	wait1Msec(50);
	
	if(SensorValue(sonarSensor) < 60)
	{
		while(SensorValue(sonarSensor) > 18)//if object is found move to
		{
			motor[motorB] = 50;
			motor[motorC] = 50;
				
		}
			
	}
}	
